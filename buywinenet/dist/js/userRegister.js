"use strict";$(function(){function r(){var r=randomCode(),o=randomColor("rgb");$(".randomNum").html(r).css("background",o).css("color","white"),$("#securityCode").val(""),$(".prompt2").css("background","#fff")}r(),$(".nextRandomNum").on("click",function(){r()});var o=$("#phoneNumber").val(),e=$("#setPassword").val(),s=null,c=!1;$("#phoneNumber").on("keyup",function(){var r=$("#phoneNumber").val();r.trim()?(clearTimeout(s),s=setTimeout(function(){checkReg.tel(r)?$.ajax({type:"post",url:"../api/register.php",data:{phoneNumber:r},success:function(r){var o=JSON.parse(r);console.log(o),c=1==o.code?($(".prompt1").css("background","url(../img/cssSprite.png) 5px 0  no-repeat"),$("#phoneNumber").css("border-color","#ccc"),!0):($("#phoneNumber").val("").attr("placeholder","该手机号码已注册").css("border-color","red"),$(".prompt1").css("background","url(../img/cssSprite.png) -20px 0  no-repeat"),!1)}}):($(".prompt1").css("background","url(../img/cssSprite.png) -20px 0  no-repeat"),$("#phoneNumber").css("border-color","red"),c=!1)},900)):($(".prompt1").css("background","url(../img/cssSprite.png) -20px 0  no-repeat"),$("#phoneNumber").css("border-color","red"))});var p=null,t=!1;$("#securityCode").on("keyup",function(){var r=$("#securityCode").val();r.trim()?(clearTimeout(p),p=setTimeout(function(){t=r==$(".randomNum").html()?($(".prompt2").css("background","url(../img/cssSprite.png) 1px 0  no-repeat"),$("#securityCode").css("border-color","#ccc"),!0):($(".prompt2").css("background","url(../img/cssSprite.png) -25px 0  no-repeat"),$("#securityCode").css("border-color","red"),!1)},800)):($(".prompt2").css("background","url(../img/cssSprite.png) -25px 0  no-repeat"),$("#securityCode").css("border-color","red"))});var n=null,a=!1;$("#checkCode").on("keyup",function(){var r=$("#checkCode").val();r.trim()?(clearTimeout(n),n=setTimeout(function(){a=r==$(".randomNum").html()?($(".prompt3").css("background","url(../img/cssSprite.png) 1px 0  no-repeat"),$("#checkCode").css("border-color","#ccc"),!0):($(".prompt3").css("background","url(../img/cssSprite.png) -25px 0  no-repeat"),$("#checkCode").css("border-color","red"),!1)},800)):($(".prompt3").css("background","url(../img/cssSprite.png) -25px 0  no-repeat"),$("#checkCode").css("border-color","red"))});var u=null,i=!1;$("#setPassword").on("keyup",function(){(e=$("#setPassword").val()).trim()?(clearTimeout(u),u=setTimeout(function(){i=checkReg.psw(e)?($(".prompt4").css("background","url(../img/cssSprite.png) 1px 0  no-repeat"),$("#setPassword").css("border-color","#ccc"),!0):($(".prompt4").css("background","url(../img/cssSprite.png) -25px 0  no-repeat"),$("#setPassword").css("border-color","red"),!1)},1e3)):($(".prompt4").css("background","url(../img/cssSprite.png) -25px 0  no-repeat"),$("#setPassword").css("border-color","red"))});var d=null,l=!1;$("#confirmPassword").on("keyup",function(){var r=$("#confirmPassword").val();r.trim()?(clearTimeout(d),d=setTimeout(function(){l=r==e?($(".prompt5").css("background","url(../img/cssSprite.png) 1px 0  no-repeat"),$("#confirmPassword").css("border-color","#ccc"),!0):($(".prompt5").css("background","url(../img/cssSprite.png) -25px 0  no-repeat"),$("#confirmPassword").css("border-color","red"),!1)},900)):($(".prompt5").css("background","url(../img/cssSprite.png) -25px 0  no-repeat"),$("#confirmPassword").css("border-color","red"))}),$(".register").on("click",function(){if(c&&t&&a&&i&&l){o=$("#phoneNumber").val(),e=$("#setPassword").val();var r=$.md5(e);$.ajax({type:"post",url:"../api/userinsert.php",data:{phoneNumber:o,password:r},success:function(r){var o=JSON.parse(r);1==o.code?(alert("注册成功"),window.location.href="../html/userLogin.html"):0==o.code&&alert("注册失败")}})}else alert("请完善资料")})});